import requests
import json
import web3

def scan_activity(activity_id):
    # Get the activity data
    response = requests.get(f"https://api.metamask.io/activities/{activity_id}")
    data = json.loads(response.content)

    # Get the receiving wallet addresses
    receiving_addresses = []
    for transaction in data["transactions"]:
        receiving_addresses.append(transaction["to"])

    # Get the sending wallet address
    sending_address = data["from"]

    # Check if the receiving wallet has the sending wallet address
    if sending_address in receiving_addresses:
        # Get the network of the sending wallet
        network = web3.eth.coinbase.network

        # Allow the transaction
        return True, network
    else:
        # Block the transaction
        return False, None

def main():
    # Get the activity ID
    activity_id = input("Enter the activity ID: ")

    # Scan the activity
    allowed, network = scan_activity(activity_id)

    # Display the result
    if allowed:
        print(f"Transaction allowed on network {network}")
    else:
        print("Transaction blocked")

if __name__ == "__main__":
    main()
